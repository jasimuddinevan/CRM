<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple CRM System</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .sidebar {
            min-width: 250px;
            transition: all 0.3s;
        }
        .main-content {
            transition: all 0.3s;
        }
        .hidden-sidebar {
            margin-left: -250px;
        }
        .full-width {
            margin-left: 0;
            width: 100%;
        }
        .section {
            display: none;
        }
        .active-section {
            display: block;
        }
        .tab-active {
            border-bottom: 3px solid #4f46e5;
            color: #4f46e5;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="flex">
        <!-- Sidebar -->
        <div id="sidebar" class="sidebar bg-gray-800 text-white min-h-screen p-4">
            <div class="flex items-center justify-between mb-8">
                <h1 class="text-2xl font-bold">SimpleCRM</h1>
                <button id="toggle-sidebar" class="lg:hidden">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <nav>
                <ul>
                    <li class="mb-2">
                        <a href="#" class="nav-link flex items-center p-2 rounded hover:bg-gray-700" data-section="dashboard">
                            <i class="fas fa-tachometer-alt w-6"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-link flex items-center p-2 rounded hover:bg-gray-700" data-section="customers">
                            <i class="fas fa-users w-6"></i>
                            <span>Customers</span>
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-link flex items-center p-2 rounded hover:bg-gray-700" data-section="deals">
                            <i class="fas fa-handshake w-6"></i>
                            <span>Deals</span>
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-link flex items-center p-2 rounded hover:bg-gray-700" data-section="tasks">
                            <i class="fas fa-tasks w-6"></i>
                            <span>Tasks</span>
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-link flex items-center p-2 rounded hover:bg-gray-700" data-section="calendar">
                            <i class="fas fa-calendar-alt w-6"></i>
                            <span>Calendar</span>
                        </a>
                    </li>
                    <li class="mb-2">
                        <a href="#" class="nav-link flex items-center p-2 rounded hover:bg-gray-700" data-section="settings">
                            <i class="fas fa-cog w-6"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="mt-auto pt-8">
                <div class="text-sm text-gray-400">
                    <p>SimpleCRM v1.0</p>
                    <p>Browser Storage Based</p>
                    <be>
                    <p>by <a href="https://www.facebook.com/jasimuddinevan"> <b>Jasim Uddin</b></a> </p>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div id="main-content" class="main-content flex-grow p-6">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <button id="mobile-menu-button" class="md:hidden text-gray-600">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
                <div class="flex items-center">
                    <div class="relative">
                        <input type="text" id="global-search" placeholder="Search..." class="bg-white rounded-lg px-4 py-2 pr-8 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <i class="fas fa-search absolute right-3 top-3 text-gray-400"></i>
                    </div>
                    <div class="ml-4">
                        <span class="bg-indigo-600 text-white rounded-full w-10 h-10 flex items-center justify-center">
                            <i class="fas fa-user"></i>
                        </span>
                    </div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <section id="dashboard" class="section active-section">
                <h2 class="text-2xl font-bold mb-6">Dashboard</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="bg-indigo-100 p-3 rounded-full">
                                <i class="fas fa-users text-indigo-600"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-gray-500 text-sm">Total Customers</h3>
                                <p id="customer-count" class="text-2xl font-semibold">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fas fa-handshake text-green-600"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-gray-500 text-sm">Active Deals</h3>
                                <p id="deal-count" class="text-2xl font-semibold">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="bg-yellow-100 p-3 rounded-full">
                                <i class="fas fa-tasks text-yellow-600"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-gray-500 text-sm">Pending Tasks</h3>
                                <p id="task-count" class="text-2xl font-semibold">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center">
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fas fa-dollar-sign text-purple-600"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-gray-500 text-sm">Revenue</h3>
                                <p id="revenue-count" class="text-2xl font-semibold">$0</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-xl font-semibold mb-4">Recent Activities</h3>
                        <div id="recent-activities" class="space-y-4">
                            <p class="text-gray-500 italic">No recent activities</p>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-xl font-semibold mb-4">Upcoming Tasks</h3>
                        <div id="upcoming-tasks" class="space-y-3">
                            <p class="text-gray-500 italic">No upcoming tasks</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Customers Section -->
            <section id="customers" class="section">
                <h2 class="text-2xl font-bold mb-6">Customers</h2>
                
                <div class="bg-white rounded-lg shadow mb-6">
                    <div class="p-4 flex justify-between items-center">
                        <input type="text" id="customer-search" placeholder="Search customers..." class="border rounded px-4 py-2 w-64">
                        <button id="add-customer-btn" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">
                            <i class="fas fa-plus mr-2"></i> Add Customer
                        </button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="text-left p-4">Name</th>
                                    <th class="text-left p-4">Email</th>
                                    <th class="text-left p-4">Phone</th>
                                    <th class="text-left p-4">Company</th>
                                    <th class="text-left p-4">Status</th>
                                    <th class="text-left p-4">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="customers-table-body">
                                <tr>
                                    <td colspan="6" class="p-4 text-center text-gray-500">No customers found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Customer Detail Modal -->
            <div id="customer-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-3xl">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold" id="customer-modal-title">Add New Customer</h3>
                        <button id="close-customer-modal" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <form id="customer-form">
                        <input type="hidden" id="customer-id">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <label for="customer-name" class="block mb-1">Name</label>
                                <input type="text" id="customer-name" class="w-full border rounded px-3 py-2" required>
                            </div>
                            <div>
                                <label for="customer-email" class="block mb-1">Email</label>
                                <input type="email" id="customer-email" class="w-full border rounded px-3 py-2" required>
                            </div>
                            <div>
                                <label for="customer-phone" class="block mb-1">Phone</label>
                                <input type="tel" id="customer-phone" class="w-full border rounded px-3 py-2">
                            </div>
                            <div>
                                <label for="customer-company" class="block mb-1">Company</label>
                                <input type="text" id="customer-company" class="w-full border rounded px-3 py-2">
                            </div>
                            <div>
                                <label for="customer-status" class="block mb-1">Status</label>
                                <select id="customer-status" class="w-full border rounded px-3 py-2">
                                    <option value="Active">Active</option>
                                    <option value="Inactive">Inactive</option>
                                    <option value="Lead">Lead</option>
                                </select>
                            </div>
                            <div>
                                <label for="customer-type" class="block mb-1">Type</label>
                                <select id="customer-type" class="w-full border rounded px-3 py-2">
                                    <option value="Individual">Individual</option>
                                    <option value="Business">Business</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label for="customer-address" class="block mb-1">Address</label>
                            <textarea id="customer-address" class="w-full border rounded px-3 py-2" rows="2"></textarea>
                        </div>
                        <div class="mb-4">
                            <label for="customer-notes" class="block mb-1">Notes</label>
                            <textarea id="customer-notes" class="w-full border rounded px-3 py-2" rows="3"></textarea>
                        </div>
                        <div class="flex justify-end">
                            <button type="button" id="cancel-customer-form" class="px-4 py-2 mr-2 border rounded">Cancel</button>
                            <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">Save Customer</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Deals Section -->
            <section id="deals" class="section">
                <h2 class="text-2xl font-bold mb-6">Deals</h2>
                
                <div class="flex justify-between items-center mb-4">
                    <input type="text" id="deal-search" placeholder="Search deals..." class="border rounded px-4 py-2 w-64">
                    <button id="add-deal-btn" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">
                        <i class="fas fa-plus mr-2"></i> Add Deal
                    </button>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
                    <!-- Pipeline columns -->
                    <div class="bg-gray-100 rounded-lg p-4">
                        <h3 class="text-lg font-semibold mb-3">Lead</h3>
                        <div id="deal-column-lead" class="space-y-3 min-h-[200px]">
                            <p class="text-gray-500 italic">No deals in this stage</p>
                        </div>
                    </div>
                    <div class="bg-gray-100 rounded-lg p-4">
                        <h3 class="text-lg font-semibold mb-3">Negotiation</h3>
                        <div id="deal-column-negotiation" class="space-y-3 min-h-[200px]">
                            <p class="text-gray-500 italic">No deals in this stage</p>
                        </div>
                    </div>
                    <div class="bg-gray-100 rounded-lg p-4">
                        <h3 class="text-lg font-semibold mb-3">Closed</h3>
                        <div id="deal-column-closed" class="space-y-3 min-h-[200px]">
                            <p class="text-gray-500 italic">No deals in this stage</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Deal Modal -->
            <div id="deal-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold" id="deal-modal-title">Add New Deal</h3>
                        <button id="close-deal-modal" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <form id="deal-form">
                        <input type="hidden" id="deal-id">
                        <div class="mb-4">
                            <label for="deal-name" class="block mb-1">Deal Name</label>
                            <input type="text" id="deal-name" class="w-full border rounded px-3 py-2" required>
                        </div>
                        <div class="mb-4">
                            <label for="deal-customer" class="block mb-1">Customer</label>
                            <select id="deal-customer" class="w-full border rounded px-3 py-2" required>
                                <option value="">Select Customer</option>
                            </select>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <label for="deal-value" class="block mb-1">Value ($)</label>
                                <input type="number" id="deal-value" class="w-full border rounded px-3 py-2" required>
                            </div>
                            <div>
                                <label for="deal-stage" class="block mb-1">Stage</label>
                                <select id="deal-stage" class="w-full border rounded px-3 py-2">
                                    <option value="lead">Lead</option>
                                    <option value="negotiation">Negotiation</option>
                                    <option value="closed">Closed</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label for="deal-closing-date" class="block mb-1">Expected Closing Date</label>
                            <input type="date" id="deal-closing-date" class="w-full border rounded px-3 py-2">
                        </div>
                        <div class="mb-4">
                            <label for="deal-description" class="block mb-1">Description</label>
                            <textarea id="deal-description" class="w-full border rounded px-3 py-2" rows="3"></textarea>
                        </div>
                        <div class="flex justify-end">
                            <button type="button" id="cancel-deal-form" class="px-4 py-2 mr-2 border rounded">Cancel</button>
                            <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">Save Deal</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Tasks Section -->
            <section id="tasks" class="section">
                <h2 class="text-2xl font-bold mb-6">Tasks</h2>
                
                <div class="bg-white rounded-lg shadow mb-8">
                    <div class="p-4 flex justify-between items-center">
                        <div>
                            <select id="task-filter" class="border rounded px-4 py-2 mr-2">
                                <option value="all">All Tasks</option>
                                <option value="pending">Pending</option>
                                <option value="completed">Completed</option>
                            </select>
                            <input type="text" id="task-search" placeholder="Search tasks..." class="border rounded px-4 py-2">
                        </div>
                        <button id="add-task-btn" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">
                            <i class="fas fa-plus mr-2"></i> Add Task
                        </button>
                    </div>
                    <div class="p-4">
                        <table class="w-full">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="text-left p-3">Task</th>
                                    <th class="text-left p-3">Related To</th>
                                    <th class="text-left p-3">Due Date</th>
                                    <th class="text-left p-3">Priority</th>
                                    <th class="text-left p-3">Status</th>
                                    <th class="text-left p-3">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="tasks-table-body">
                                <tr>
                                    <td colspan="6" class="p-4 text-center text-gray-500">No tasks found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Task Modal -->
            <div id="task-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold" id="task-modal-title">Add New Task</h3>
                        <button id="close-task-modal" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <form id="task-form">
                        <input type="hidden" id="task-id">
                        <div class="mb-4">
                            <label for="task-title" class="block mb-1">Task Title</label>
                            <input type="text" id="task-title" class="w-full border rounded px-3 py-2" required>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <label for="task-due-date" class="block mb-1">Due Date</label>
                                <input type="date" id="task-due-date" class="w-full border rounded px-3 py-2" required>
                            </div>
                            <div>
                                <label for="task-priority" class="block mb-1">Priority</label>
                                <select id="task-priority" class="w-full border rounded px-3 py-2">
                                    <option value="Low">Low</option>
                                    <option value="Medium">Medium</option>
                                    <option value="High">High</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label for="task-status" class="block mb-1">Status</label>
                            <select id="task-status" class="w-full border rounded px-3 py-2">
                                <option value="Pending">Pending</option>
                                <option value="In Progress">In Progress</option>
                                <option value="Completed">Completed</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label for="task-related-to" class="block mb-1">Related To</label>
                            <select id="task-related-to" class="w-full border rounded px-3 py-2">
                                <option value="">None</option>
                                <!-- Will be populated with customers and deals -->
                            </select>
                        </div>
                        <div class="mb-4">
                            <label for="task-description" class="block mb-1">Description</label>
                            <textarea id="task-description" class="w-full border rounded px-3 py-2" rows="3"></textarea>
                        </div>
                        <div class="flex justify-end">
                            <button type="button" id="cancel-task-form" class="px-4 py-2 mr-2 border rounded">Cancel</button>
                            <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">Save Task</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Calendar Section -->
            <section id="calendar" class="section">
                <h2 class="text-2xl font-bold mb-6">Calendar</h2>
                
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex justify-between items-center mb-4">
                        <div>
                            <button id="prev-month" class="px-2 py-1 bg-gray-200 rounded">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <span id="current-month-year" class="mx-4 font-semibold">April 2023</span>
                            <button id="next-month" class="px-2 py-1 bg-gray-200 rounded">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <button id="add-event-btn" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">
                            <i class="fas fa-plus mr-2"></i> Add Event
                        </button>
                    </div>
                    
                    <div class="calendar-grid">
                        <div class="grid grid-cols-7 gap-2">
                            <div class="text-center font-semibold p-2">Sun</div>
                            <div class="text-center font-semibold p-2">Mon</div>
                            <div class="text-center font-semibold p-2">Tue</div>
                            <div class="text-center font-semibold p-2">Wed</div>
                            <div class="text-center font-semibold p-2">Thu</div>
                            <div class="text-center font-semibold p-2">Fri</div>
                            <div class="text-center font-semibold p-2">Sat</div>
                        </div>
                        <div id="calendar-days" class="grid grid-cols-7 gap-2 mt-2">
                            <!-- Calendar days will be generated here -->
                        </div>
                    </div>
                    
                    <div class="mt-8">
                        <h3 class="text-xl font-semibold mb-4">Upcoming Events</h3>
                        <div id="upcoming-events" class="space-y-3">
                            <p class="text-gray-500 italic">No upcoming events</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Event Modal -->
            <div id="event-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold" id="event-modal-title">Add New Event</h3>
                        <button id="close-event-modal" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <form id="event-form">
                        <input type="hidden" id="event-id">
                        <div class="mb-4">
                            <label for="event-title" class="block mb-1">Event Title</label>
                            <input type="text" id="event-title" class="w-full border rounded px-3 py-2" required>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <label for="event-date" class="block mb-1">Date</label>
                                <input type="date" id="event-date" class="w-full border rounded px-3 py-2" required>
                            </div>
                            <div>
                                <label for="event-time" class="block mb-1">Time</label>
                                <input type="time" id="event-time" class="w-full border rounded px-3 py-2">
                            </div>
                        </div>
                        <div class="mb-4">
                            <label for="event-type" class="block mb-1">Event Type</label>
                            <select id="event-type" class="w-full border rounded px-3 py-2">
                                <option value="Meeting">Meeting</option>
                                <option value="Call">Call</option>
                                <option value="Deadline">Deadline</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label for="event-related-to" class="block mb-1">Related To</label>
                            <select id="event-related-to" class="w-full border rounded px-3 py-2">
                                <option value="">None</option>
                                <!-- Will be populated with customers and deals -->
                            </select>
                        </div>
                        <div class="mb-4">
                            <label for="event-description" class="block mb-1">Description</label>
                            <textarea id="event-description" class="w-full border rounded px-3 py-2" rows="3"></textarea>
                        </div>
                        <div class="flex justify-end">
                            <button type="button" id="cancel-event-form" class="px-4 py-2 mr-2 border rounded">Cancel</button>
                            <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">Save Event</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Settings Section -->
            <section id="settings" class="section">
                <h2 class="text-2xl font-bold mb-6">Settings</h2>
                
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">Data Management</h3>
                        <div class="flex items-center">
                            <button id="export-data" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 mr-4">
                                <i class="fas fa-download mr-2"></i> Export Data
                            </button>
                            <button id="import-data" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                                <i class="fas fa-upload mr-2"></i> Import Data
                            </button>
                        </div>
                        <input type="file" id="import-file" class="hidden" accept=".json">
                    </div>
                    
                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4">Clear Data</h3>
                        <p class="text-gray-600 mb-4">Warning: This will delete all your CRM data and cannot be undone.</p>
                        <button id="clear-data" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                            <i class="fas fa-trash-alt mr-2"></i> Clear All Data
                        </button>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-semibold mb-4">About</h3>
                        <p class="mb-2">SimpleCRM v1.0</p>
                        <p class="text-gray-600">A browser-based CRM system using local storage for data persistence.</p>
                    </div>
                </div>
            </section>

        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md">
            <h3 class="text-xl font-bold mb-4">Confirm Delete</h3>
            <p id="delete-message" class="mb-6">Are you sure you want to delete this item?</p>
            <div class="flex justify-end">
                <button id="cancel-delete" class="px-4 py-2 mr-2 border rounded">Cancel</button>
                <button id="confirm-delete" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Delete</button>
            </div>
        </div>
    </div>

    <script>
        // Main CRM class
        class SimpleCRM {
            constructor() {
                this.customers = JSON.parse(localStorage.getItem('crm-customers')) || [];
                this.deals = JSON.parse(localStorage.getItem('crm-deals')) || [];
                this.tasks = JSON.parse(localStorage.getItem('crm-tasks')) || [];
                this.events = JSON.parse(localStorage.getItem('crm-events')) || [];
                this.activities = JSON.parse(localStorage.getItem('crm-activities')) || [];
                
                this.initUI();
                this.setupEventListeners();
                this.loadDashboard();
                this.setupCalendar();
            }
            
            // Initialize UI elements
            initUI() {
                // Set active navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const section = link.dataset.section;
                        this.showSection(section);
                    });
                });
                
                // Mobile menu toggle
                document.getElementById('mobile-menu-button').addEventListener('click', () => {
                    const sidebar = document.getElementById('sidebar');
                    const mainContent = document.getElementById('main-content');
                    sidebar.classList.toggle('hidden-sidebar');
                    mainContent.classList.toggle('full-width');
                });
            }
            
            // Setup all event listeners
            setupEventListeners() {
                // Customer form events
                document.getElementById('add-customer-btn').addEventListener('click', () => this.showCustomerModal());
                document.getElementById('customer-form').addEventListener('submit', (e) => this.handleCustomerFormSubmit(e));
                document.getElementById('close-customer-modal').addEventListener('click', () => this.hideCustomerModal());
                document.getElementById('cancel-customer-form').addEventListener('click', () => this.hideCustomerModal());
                
                // Deal form events
                document.getElementById('add-deal-btn').addEventListener('click', () => this.showDealModal());
                document.getElementById('deal-form').addEventListener('submit', (e) => this.handleDealFormSubmit(e));
                document.getElementById('close-deal-modal').addEventListener('click', () => this.hideDealModal());
                document.getElementById('cancel-deal-form').addEventListener('click', () => this.hideDealModal());
                
                // Task form events
                document.getElementById('add-task-btn').addEventListener('click', () => this.showTaskModal());
                document.getElementById('task-form').addEventListener('submit', (e) => this.handleTaskFormSubmit(e));
                document.getElementById('close-task-modal').addEventListener('click', () => this.hideTaskModal());
                document.getElementById('cancel-task-form').addEventListener('click', () => this.hideTaskModal());
                
                // Event form events
                document.getElementById('add-event-btn').addEventListener('click', () => this.showEventModal());
                document.getElementById('event-form').addEventListener('submit', (e) => this.handleEventFormSubmit(e));
                document.getElementById('close-event-modal').addEventListener('click', () => this.hideEventModal());
                document.getElementById('cancel-event-form').addEventListener('click', () => this.hideEventModal());
                
                // Calendar navigation
                document.getElementById('prev-month').addEventListener('click', () => this.navigateMonth(-1));
                document.getElementById('next-month').addEventListener('click', () => this.navigateMonth(1));
                
                // Data management
                document.getElementById('export-data').addEventListener('click', () => this.exportData());
                document.getElementById('import-data').addEventListener('click', () => document.getElementById('import-file').click());
                document.getElementById('import-file').addEventListener('change', (e) => this.importData(e));
                document.getElementById('clear-data').addEventListener('click', () => this.confirmClearData());
                
                // Delete modal
                document.getElementById('cancel-delete').addEventListener('click', () => this.hideDeleteModal());
                
                // Search functionality
                document.getElementById('customer-search').addEventListener('input', (e) => this.filterCustomers(e.target.value));
                document.getElementById('task-search').addEventListener('input', (e) => this.filterTasks(e.target.value));
                document.getElementById('deal-search').addEventListener('input', (e) => this.filterDeals(e.target.value));
                document.getElementById('task-filter').addEventListener('change', () => this.loadTasks());
            }
            
            // Show specific section
            showSection(sectionId) {
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.remove('active-section');
                });
                document.getElementById(sectionId).classList.add('active-section');
                
                // Update nav active state
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('bg-gray-700');
                    if (link.dataset.section === sectionId) {
                        link.classList.add('bg-gray-700');
                    }
                });
                
                // Load section data
                if (sectionId === 'customers') {
                    this.loadCustomers();
                } else if (sectionId === 'deals') {
                    this.loadDeals();
                } else if (sectionId === 'tasks') {
                    this.loadTasks();
                } else if (sectionId === 'calendar') {
                    this.loadEvents();
                } else if (sectionId === 'dashboard') {
                    this.loadDashboard();
                }
            }
            
            // Dashboard
            loadDashboard() {
                document.getElementById('customer-count').textContent = this.customers.length;
                document.getElementById('deal-count').textContent = this.deals.filter(deal => deal.stage !== 'closed').length;
                document.getElementById('task-count').textContent = this.tasks.filter(task => task.status !== 'Completed').length;
                
                // Calculate total revenue from closed deals
                const totalRevenue = this.deals
                    .filter(deal => deal.stage === 'closed')
                    .reduce((sum, deal) => sum + parseFloat(deal.value || 0), 0);
                document.getElementById('revenue-count').textContent = '$' + totalRevenue.toLocaleString();
                
                // Load recent activities
                const activitiesContainer = document.getElementById('recent-activities');
                activitiesContainer.innerHTML = '';
                
                const recentActivities = this.activities.slice(0, 5);
                if (recentActivities.length === 0) {
                    activitiesContainer.innerHTML = '<p class="text-gray-500 italic">No recent activities</p>';
                } else {
                    recentActivities.forEach(activity => {
                        const activityEl = document.createElement('div');
                        activityEl.className = 'border-b pb-2 flex items-start';
                        activityEl.innerHTML = `
                            <div class="mr-3">
                                <i class="fas ${this.getActivityIcon(activity.type)} text-blue-500"></i>
                            </div>
                            <div>
                                <p>${activity.description}</p>
                                <p class="text-sm text-gray-500">${this.formatDate(activity.date)}</p>
                            </div>
                        `;
                        activitiesContainer.appendChild(activityEl);
                    });
                }
                
                // Load upcoming tasks
                const upcomingTasksContainer = document.getElementById('upcoming-tasks');
                upcomingTasksContainer.innerHTML = '';
                
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                
                const upcomingTasks = this.tasks
                    .filter(task => {
                        const dueDate = new Date(task.dueDate);
                        return task.status !== 'Completed' && dueDate >= today;
                    })
                    .sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate))
                    .slice(0, 5);
                
                if (upcomingTasks.length === 0) {
                    upcomingTasksContainer.innerHTML = '<p class="text-gray-500 italic">No upcoming tasks</p>';
                } else {
                    upcomingTasks.forEach(task => {
                        const taskEl = document.createElement('div');
                        taskEl.className = 'bg-white shadow-sm rounded p-3 border-l-4';
                        taskEl.classList.add(this.getTaskPriorityColor(task.priority));
                        taskEl.innerHTML = `
                            <div class="flex justify-between">
                                <h4 class="font-semibold">${task.title}</h4>
                                <span class="text-sm">${this.formatDate(task.dueDate)}</span>
                            </div>
                            <p class="text-sm text-gray-600">${task.relatedTo || 'No relation'}</p>
                        `;
                        upcomingTasksContainer.appendChild(taskEl);
                    });
                }
            }
            
            // Customers
            loadCustomers() {
                const tableBody = document.getElementById('customers-table-body');
                tableBody.innerHTML = '';
                
                if (this.customers.length === 0) {
                    tableBody.innerHTML = '<tr><td colspan="6" class="p-4 text-center text-gray-500">No customers found</td></tr>';
                    return;
                }
                
                this.customers.forEach(customer => {
                    const row = document.createElement('tr');
                    row.className = 'border-t hover:bg-gray-50';
                    row.innerHTML = `
                        <td class="p-4">
                            <div class="font-medium">${customer.name}</div>
                        </td>
                        <td class="p-4">${customer.email}</td>
                        <td class="p-4">${customer.phone || '-'}</td>
                        <td class="p-4">${customer.company || '-'}</td>
                        <td class="p-4">
                            <span class="px-2 py-1 rounded text-xs ${this.getStatusColor(customer.status)}">
                                ${customer.status}
                            </span>
                        </td>
                        <td class="p-4">
                            <button class="text-blue-600 hover:text-blue-800 mr-2 edit-customer" data-id="${customer.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="text-red-600 hover:text-red-800 delete-customer" data-id="${customer.id}">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
                
                // Add event listeners to action buttons
                document.querySelectorAll('.edit-customer').forEach(btn => {
                    btn.addEventListener('click', () => this.editCustomer(btn.dataset.id));
                });
                
                document.querySelectorAll('.delete-customer').forEach(btn => {
                    btn.addEventListener('click', () => this.confirmDeleteCustomer(btn.dataset.id));
                });
            }
            
            filterCustomers(query) {
                const tableBody = document.getElementById('customers-table-body');
                tableBody.innerHTML = '';
                
                const filteredCustomers = this.customers.filter(customer => 
                    customer.name.toLowerCase().includes(query.toLowerCase()) ||
                    customer.email.toLowerCase().includes(query.toLowerCase()) ||
                    (customer.company && customer.company.toLowerCase().includes(query.toLowerCase()))
                );
                
                if (filteredCustomers.length === 0) {
                    tableBody.innerHTML = '<tr><td colspan="6" class="p-4 text-center text-gray-500">No customers found</td></tr>';
                    return;
                }
                
                filteredCustomers.forEach(customer => {
                    const row = document.createElement('tr');
                    row.className = 'border-t hover:bg-gray-50';
                    row.innerHTML = `
                        <td class="p-4">
                            <div class="font-medium">${customer.name}</div>
                        </td>
                        <td class="p-4">${customer.email}</td>
                        <td class="p-4">${customer.phone || '-'}</td>
                        <td class="p-4">${customer.company || '-'}</td>
                        <td class="p-4">
                            <span class="px-2 py-1 rounded text-xs ${this.getStatusColor(customer.status)}">
                                ${customer.status}
                            </span>
                        </td>
                        <td class="p-4">
                            <button class="text-blue-600 hover:text-blue-800 mr-2 edit-customer" data-id="${customer.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="text-red-600 hover:text-red-800 delete-customer" data-id="${customer.id}">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </td>
                    `;
                    tableBody.appendChild(row);
                });
                
                // Add event listeners to action buttons
                document.querySelectorAll('.edit-customer').forEach(btn => {
                    btn.addEventListener('click', () => this.editCustomer(btn.dataset.id));
                });
                
                document.querySelectorAll('.delete-customer').forEach(btn => {
                    btn.addEventListener('click', () => this.confirmDeleteCustomer(btn.dataset.id));
                });
            }
            
            showCustomerModal(customer = null) {
                const modal = document.getElementById('customer-modal');
                const modalTitle = document.getElementById('customer-modal-title');
                const form = document.getElementById('customer-form');
                
                // Reset form
                form.reset();
                
                if (customer) {
                    modalTitle.textContent = 'Edit Customer';
                    document.getElementById('customer-id').value = customer.id;
                    document.getElementById('customer-name').value = customer.name;
                    document.getElementById('customer-email').value = customer.email;
                    document.getElementById('customer-phone').value = customer.phone || '';
                    document.getElementById('customer-company').value = customer.company || '';
                    document.getElementById('customer-status').value = customer.status;
                    document.getElementById('customer-type').value = customer.type || 'Individual';
                    document.getElementById('customer-address').value = customer.address || '';
                    document.getElementById('customer-notes').value = customer.notes || '';
                } else {
                    modalTitle.textContent = 'Add New Customer';
                    document.getElementById('customer-id').value = '';
                }
                
                modal.classList.remove('hidden');
            }
            
            hideCustomerModal() {
                document.getElementById('customer-modal').classList.add('hidden');
            }
            
            handleCustomerFormSubmit(e) {
                e.preventDefault();
                
                const id = document.getElementById('customer-id').value;
                const newCustomer = {
                    name: document.getElementById('customer-name').value,
                    email: document.getElementById('customer-email').value,
                    phone: document.getElementById('customer-phone').value,
                    company: document.getElementById('customer-company').value,
                    status: document.getElementById('customer-status').value,
                    type: document.getElementById('customer-type').value,
                    address: document.getElementById('customer-address').value,
                    notes: document.getElementById('customer-notes').value
                };
                
                if (id) {
                    // Update existing customer
                    newCustomer.id = id;
                    const index = this.customers.findIndex(c => c.id === id);
                    if (index !== -1) {
                        this.customers[index] = newCustomer;
                        this.addActivity('update', 'Updated customer: ' + newCustomer.name);
                    }
                } else {
                    // Add new customer
                    newCustomer.id = this.generateId();
                    this.customers.push(newCustomer);
                    this.addActivity('create', 'Added new customer: ' + newCustomer.name);
                }
                
                this.saveCustomers();
                this.hideCustomerModal();
                this.loadCustomers();
                this.loadDashboard();
            }
            
            editCustomer(id) {
                const customer = this.customers.find(c => c.id === id);
                if (customer) {
                    this.showCustomerModal(customer);
                }
            }
            
            confirmDeleteCustomer(id) {
                const customer = this.customers.find(c => c.id === id);
                if (!customer) return;
                
                this.showDeleteModal(
                    `Are you sure you want to delete customer "${customer.name}"?`,
                    () => this.deleteCustomer(id)
                );
            }
            
            deleteCustomer(id) {
                const index = this.customers.findIndex(c => c.id === id);
                if (index !== -1) {
                    const customer = this.customers[index];
                    this.customers.splice(index, 1);
                    this.saveCustomers();
                    
                    // Delete related deals and tasks
                    this.deals = this.deals.filter(deal => deal.customerId !== id);
                    this.saveDeals();
                    
                    this.tasks = this.tasks.filter(task => task.relatedId !== id);
                    this.saveTasks();
                    
                    this.addActivity('delete', 'Deleted customer: ' + customer.name);
                    
                    this.loadCustomers();
                    this.loadDeals();
                    this.loadTasks();
                    this.loadDashboard();
                }
                
                this.hideDeleteModal();
            }
            
            saveCustomers() {
                localStorage.setItem('crm-customers', JSON.stringify(this.customers));
            }
            
            // Deals
            loadDeals() {
                // Populate customer dropdown in deal form
                const customerSelect = document.getElementById('deal-customer');
                customerSelect.innerHTML = '<option value="">Select Customer</option>';
                
                this.customers.forEach(customer => {
                    const option = document.createElement('option');
                    option.value = customer.id;
                    option.textContent = customer.name;
                    customerSelect.appendChild(option);
                });
                
                // Clear all columns
                document.getElementById('deal-column-lead').innerHTML = '';
                document.getElementById('deal-column-negotiation').innerHTML = '';
                document.getElementById('deal-column-closed').innerHTML = '';
                
                // If there are no deals, show empty message
                if (this.deals.length === 0) {
                    document.getElementById('deal-column-lead').innerHTML = '<p class="text-gray-500 italic">No deals in this stage</p>';
                    document.getElementById('deal-column-negotiation').innerHTML = '<p class="text-gray-500 italic">No deals in this stage</p>';
                    document.getElementById('deal-column-closed').innerHTML = '<p class="text-gray-500 italic">No deals in this stage</p>';
                    return;
                }
                
                // Group deals by stage
                const stages = {
                    lead: [],
                    negotiation: [],
                    closed: []
                };
                
                this.deals.forEach(deal => {
                    if (stages[deal.stage]) {
                        stages[deal.stage].push(deal);
                    }
                });
                
                // Render deals in each column
                Object.keys(stages).forEach(stage => {
                    const container = document.getElementById(`deal-column-${stage}`);
                    
                    if (stages[stage].length === 0) {
                        container.innerHTML = '<p class="text-gray-500 italic">No deals in this stage</p>';
                        return;
                    }
                    
                    container.innerHTML = '';
                    
                    stages[stage].forEach(deal => {
                        const customer = this.customers.find(c => c.id === deal.customerId);
                        const customerName = customer ? customer.name : 'Unknown Customer';
                        
                        const card = document.createElement('div');
                        card.className = 'bg-white rounded-lg shadow p-4 mb-3';
                        card.innerHTML = `
                            <div class="flex justify-between items-start">
                                <h4 class="font-semibold">${deal.name}</h4>
                                <div class="text-sm font-medium bg-blue-100 text-blue-800 rounded px-2 py-1">$${parseFloat(deal.value || 0).toLocaleString()}</div>
                            </div>
                            <p class="text-sm text-gray-600 mb-2">${customerName}</p>
                            <p class="text-xs text-gray-500 mb-3">Closing: ${deal.closingDate ? this.formatDate(deal.closingDate) : 'Not set'}</p>
                            <div class="flex justify-end mt-2">
                                <button class="text-blue-600 hover:text-blue-800 mr-3 edit-deal" data-id="${deal.id}">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="text-red-600 hover:text-red-800 delete-deal" data-id="${deal.id}">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        `;
                        
                        container.appendChild(card);
                    });
                });
                
                // Add event listeners to action buttons
                document.querySelectorAll('.edit-deal').forEach(btn => {
                    btn.addEventListener('click', () => this.editDeal(btn.dataset.id));
                });
                
                document.querySelectorAll('.delete-deal').forEach(btn => {
                    btn.addEventListener('click', () => this.confirmDeleteDeal(btn.dataset.id));
                });
            }
            
            filterDeals(query) {
                // This method will be similar to filterCustomers but for deals
                if (!query) {
                    this.loadDeals();
                    return;
                }
                
                query = query.toLowerCase();
                
                // Clear all columns
                document.getElementById('deal-column-lead').innerHTML = '';
                document.getElementById('deal-column-negotiation').innerHTML = '';
                document.getElementById('deal-column-closed').innerHTML = '';
                
                // Filter deals
                const filteredDeals = this.deals.filter(deal => 
                    deal.name.toLowerCase().includes(query) || 
                    deal.description && deal.description.toLowerCase().includes(query)
                );
                
                // If there are no deals after filtering
                if (filteredDeals.length === 0) {
                    document.getElementById('deal-column-lead').innerHTML = '<p class="text-gray-500 italic">No matching deals</p>';
                    document.getElementById('deal-column-negotiation').innerHTML = '<p class="text-gray-500 italic">No matching deals</p>';
                    document.getElementById('deal-column-closed').innerHTML = '<p class="text-gray-500 italic">No matching deals</p>';
                    return;
                }
                
                // Group filtered deals by stage
                const stages = {
                    lead: [],
                    negotiation: [],
                    closed: []
                };
                
                filteredDeals.forEach(deal => {
                    if (stages[deal.stage]) {
                        stages[deal.stage].push(deal);
                    }
                });
                
                // Render deals in each column
                Object.keys(stages).forEach(stage => {
                    const container = document.getElementById(`deal-column-${stage}`);
                    
                    if (stages[stage].length === 0) {
                        container.innerHTML = '<p class="text-gray-500 italic">No matching deals</p>';
                        return;
                    }
                    
                    container.innerHTML = '';
                    
                    stages[stage].forEach(deal => {
                        const customer = this.customers.find(c => c.id === deal.customerId);
                        const customerName = customer ? customer.name : 'Unknown Customer';
                        
                        const card = document.createElement('div');
                        card.className = 'bg-white rounded-lg shadow p-4 mb-3';
                        card.innerHTML = `
                            <div class="flex justify-between items-start">
                                <h4 class="font-semibold">${deal.name}</h4>
                                <div class="text-sm font-medium bg-blue-100 text-blue-800 rounded px-2 py-1">$${parseFloat(deal.value || 0).toLocaleString()}</div>
                            </div>
                            <p class="text-sm text-gray-600 mb-2">${customerName}</p>
                            <p class="text-xs text-gray-500 mb-3">Closing: ${deal.closingDate ? this.formatDate(deal.closingDate) : 'Not set'}</p>
                            <div class="flex justify-end mt-2">
                                <button class="text-blue-600 hover:text-blue-800 mr-3 edit-deal" data-id="${deal.id}">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="text-red-600 hover:text-red-800 delete-deal" data-id="${deal.id}">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        `;
                        
                        container.appendChild(card);
                    });
                });
                
                // Add event listeners to action buttons
                document.querySelectorAll('.edit-deal').forEach(btn => {
                    btn.addEventListener('click', () => this.editDeal(btn.dataset.id));
                });
                
                document.querySelectorAll('.delete-deal').forEach(btn => {
                    btn.addEventListener('click', () => this.confirmDeleteDeal(btn.dataset.id));
                });
            }
            
            showDealModal(deal = null) {
                const modal = document.getElementById('deal-modal');
                const modalTitle = document.getElementById('deal-modal-title');
                const form = document.getElementById('deal-form');
                
                // Reset form
                form.reset();
                
                // Populate customer dropdown
                const customerSelect = document.getElementById('deal-customer');
                customerSelect.innerHTML = '<option value="">Select Customer</option>';
                
                this.customers.forEach(customer => {
                    const option = document.createElement('option');
                    option.value = customer.id;
                    option.textContent = customer.name;
                    customerSelect.appendChild(option);
                });
                
                if (deal) {
                    modalTitle.textContent = 'Edit Deal';
                    document.getElementById('deal-id').value = deal.id;
                    document.getElementById('deal-name').value = deal.name;
                    document.getElementById('deal-customer').value = deal.customerId;
                    document.getElementById('deal-value').value = deal.value || '';
                    document.getElementById('deal-stage').value = deal.stage;
                    document.getElementById('deal-closing-date').value = deal.closingDate || '';
                    document.getElementById('deal-description').value = deal.description || '';
                } else {
                    modalTitle.textContent = 'Add New Deal';
                    document.getElementById('deal-id').value = '';
                }
                
                modal.classList.remove('hidden');
            }
            
            hideDealModal() {
                document.getElementById('deal-modal').classList.add('hidden');
            }
            
            handleDealFormSubmit(e) {
                e.preventDefault();
                
                const id = document.getElementById('deal-id').value;
                const customerId = document.getElementById('deal-customer').value;
                
                if (!customerId) {
                    alert('Please select a customer');
                    return;
                }
                
                const newDeal = {
                    name: document.getElementById('deal-name').value,
                    customerId: customerId,
                    value: document.getElementById('deal-value').value,
                    stage: document.getElementById('deal-stage').value,
                    closingDate: document.getElementById('deal-closing-date').value,
                    description: document.getElementById('deal-description').value
                };
                
                if (id) {
                    // Update existing deal
                    newDeal.id = id;
                    const index = this.deals.findIndex(d => d.id === id);
                    if (index !== -1) {
                        this.deals[index] = newDeal;
                        this.addActivity('update', 'Updated deal: ' + newDeal.name);
                    }
                } else {
                    // Add new deal
                    newDeal.id = this.generateId();
                    this.deals.push(newDeal);
                    this.addActivity('create', 'Added new deal: ' + newDeal.name);
                }
                
                this.saveDeals();
                this.hideDealModal();
                this.loadDeals();
                this.loadDashboard();
            }
            
            editDeal(id) {
                const deal = this.deals.find(d => d.id === id);
                if (deal) {
                    this.showDealModal(deal);
                }
            }
            
            confirmDeleteDeal(id) {
                const deal = this.deals.find(d => d.id === id);
                if (!deal) return;
                
                this.showDeleteModal(
                    `Are you sure you want to delete deal "${deal.name}"?`,
                    () => this.deleteDeal(id)
                );
            }
            
            deleteDeal(id) {
                const index = this.deals.findIndex(d => d.id === id);
                if (index !== -1) {
                    const deal = this.deals[index];
                    this.deals.splice(index, 1);
                    this.saveDeals();
                    
                    // Delete related tasks
                    this.tasks = this.tasks.filter(task => task.relatedId !== id);
                    this.saveTasks();
                    
                    this.addActivity('delete', 'Deleted deal: ' + deal.name);
                    
                    this.loadDeals();
                    this.loadTasks();
                    this.loadDashboard();
                }
                
                this.hideDeleteModal();
            }
            
            saveDeals() {
                localStorage.setItem('crm-deals', JSON.stringify(this.deals));
            }
            
            // Tasks
            loadTasks() {
                const tableBody = document.getElementById('tasks-table-body');
                tableBody.innerHTML = '';
                
                const filter = document.getElementById('task-filter').value;
                const searchQuery = document.getElementById('task-search').value.toLowerCase();
                
                // Populate related-to dropdown in task form
                const relatedToSelect = document.getElementById('task-related-to');
                relatedToSelect.innerHTML = '<option value="">None</option>';
                
                this.customers.forEach(customer => {
                    const option = document.createElement('option');
                    option.value = `customer_${customer.id}`;
                    option.textContent = `Customer: ${customer.name}`;
                    relatedToSelect.appendChild(option);
                });
                
                this.deals.forEach(deal => {
                    const option = document.createElement('option');
                    option.value = `deal_${deal.id}`;
                    option.textContent = `Deal: ${deal.name}`;
                    relatedToSelect.appendChild(option);
                });
                
                // Filter tasks
                let filteredTasks = this.tasks;
                
                if (filter === 'pending') {
                    filteredTasks = filteredTasks.filter(task => task.status !== 'Completed');
                } else if (filter === 'completed') {
                    filteredTasks = filteredTasks.filter(task => task.status === 'Completed');
                }
                
                if (searchQuery) {
                    filteredTasks = filteredTasks.filter(task => 
                        task.title.toLowerCase().includes(searchQuery) || 
                        (task.description && task.description.toLowerCase().includes(searchQuery))
                    );
                }
                
                // Sort tasks by due date
                filteredTasks.sort((a, b) => new Date(a.dueDate) - new Date(b.dueDate));
                
                if (filteredTasks.length === 0) {
                    tableBody.innerHTML = '<tr><td colspan="6" class="p-4 text-center text-gray-500">No tasks found</td></tr>';
                    return;
                }
                
                filteredTasks.forEach(task => {
                    const row = document.createElement('tr');
                    row.className = 'border-t hover:bg-gray-50';
                    
                    let relatedTo = '-';
                    if (task.relatedTo) {
                        const [type, id] = task.relatedTo.split('_');
                        if (type === 'customer') {
                            const customer = this.customers.find(c => c.id === id);
                            if (customer) {
                                relatedTo = `Customer: ${customer.name}`;
                            }
                        } else if (type === 'deal') {
                            const deal = this.deals.find(d => d.id === id);
                            if (deal) {
                                relatedTo = `Deal: ${deal.name}`;
                            }
                        }
                    }
                    
                    row.innerHTML = `
                        <td class="p-4">
                            <div class="font-medium">${task.title}</div>
                            <div class="text-sm text-gray-500">${task.description || ''}</div>
                        </td>
                        <td class="p-4">${relatedTo}</td>
                        <td class="p-4">${this.formatDate(task.dueDate)}</td>
                        <td class="p-4">
                            <span class="px-2 py-1 rounded text-xs ${this.getPriorityColor(task.priority)}">
                                ${task.priority}
                            </span>
                        </td>
                        <td class="p-4">
                            <span class="px-2 py-1 rounded text-xs ${this.getTaskStatusColor(task.status)}">
                                ${task.status}
                            </span>
                        </td>
                        <td class="p-4">
                            <button class="text-blue-600 hover:text-blue-800 mr-2 edit-task" data-id="${task.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="text-green-600 hover:text-green-800 mr-2 complete-task" data-id="${task.id}" ${task.status === 'Completed' ? 'disabled' : ''}>
                                <i class="fas fa-check"></i>
                            </button>
                            <button class="text-red-600 hover:text-red-800 delete-task" data-id="${task.id}">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                });
                
                // Add event listeners to action buttons
                document.querySelectorAll('.edit-task').forEach(btn => {
                    btn.addEventListener('click', () => this.editTask(btn.dataset.id));
                });
                
                document.querySelectorAll('.complete-task').forEach(btn => {
                    if (btn.hasAttribute('disabled')) return;
                    btn.addEventListener('click', () => this.completeTask(btn.dataset.id));
                });
                
                document.querySelectorAll('.delete-task').forEach(btn => {
                    btn.addEventListener('click', () => this.confirmDeleteTask(btn.dataset.id));
                });
            }
            
            showTaskModal(task = null) {
                const modal = document.getElementById('task-modal');
                const modalTitle = document.getElementById('task-modal-title');
                const form = document.getElementById('task-form');
                
                // Reset form
                form.reset();
                
                // Populate related to dropdown
                const relatedToSelect = document.getElementById('task-related-to');
                relatedToSelect.innerHTML = '<option value="">None</option>';
                
                this.customers.forEach(customer => {
                    const option = document.createElement('option');
                    option.value = `customer_${customer.id}`;
                    option.textContent = `Customer: ${customer.name}`;
                    relatedToSelect.appendChild(option);
                });
                
                this.deals.forEach(deal => {
                    const option = document.createElement('option');
                    option.value = `deal_${deal.id}`;
                    option.textContent = `Deal: ${deal.name}`;
                    relatedToSelect.appendChild(option);
                });
                
                if (task) {
                    modalTitle.textContent = 'Edit Task';
                    document.getElementById('task-id').value = task.id;
                    document.getElementById('task-title').value = task.title;
                    document.getElementById('task-due-date').value = task.dueDate;
                    document.getElementById('task-priority').value = task.priority;
                    document.getElementById('task-status').value = task.status;
                    document.getElementById('task-related-to').value = task.relatedTo || '';
                    document.getElementById('task-description').value = task.description || '';
                } else {
                    modalTitle.textContent = 'Add New Task';
                    document.getElementById('task-id').value = '';
                    // Set default due date to today
                    const today = new Date();
                    const yyyy = today.getFullYear();
                    const mm = String(today.getMonth() + 1).padStart(2, '0');
                    const dd = String(today.getDate()).padStart(2, '0');
                    document.getElementById('task-due-date').value = `${yyyy}-${mm}-${dd}`;
                }
                
                modal.classList.remove('hidden');
            }
            
            hideTaskModal() {
                document.getElementById('task-modal').classList.add('hidden');
            }
            
            handleTaskFormSubmit(e) {
                e.preventDefault();
                
                const id = document.getElementById('task-id').value;
                
                const newTask = {
                    title: document.getElementById('task-title').value,
                    dueDate: document.getElementById('task-due-date').value,
                    priority: document.getElementById('task-priority').value,
                    status: document.getElementById('task-status').value,
                    relatedTo: document.getElementById('task-related-to').value,
                    description: document.getElementById('task-description').value
                };
                
                if (id) {
                    // Update existing task
                    newTask.id = id;
                    const index = this.tasks.findIndex(t => t.id === id);
                    if (index !== -1) {
                        this.tasks[index] = newTask;
                        this.addActivity('update', 'Updated task: ' + newTask.title);
                    }
                } else {
                    // Add new task
                    newTask.id = this.generateId();
                    this.tasks.push(newTask);
                    this.addActivity('create', 'Added new task: ' + newTask.title);
                }
                
                this.saveTasks();
                this.hideTaskModal();
                this.loadTasks();
                this.loadDashboard();
            }
            
            editTask(id) {
                const task = this.tasks.find(t => t.id === id);
                if (task) {
                    this.showTaskModal(task);
                }
            }
            
            completeTask(id) {
                const task = this.tasks.find(t => t.id === id);
                if (task) {
                    task.status = 'Completed';
                    this.saveTasks();
                    this.addActivity('update', 'Completed task: ' + task.title);
                    this.loadTasks();
                    this.loadDashboard();
                }
            }
            
            confirmDeleteTask(id) {
                const task = this.tasks.find(t => t.id === id);
                if (!task) return;
                
                this.showDeleteModal(
                    `Are you sure you want to delete task "${task.title}"?`,
                    () => this.deleteTask(id)
                );
            }
            
            deleteTask(id) {
                const index = this.tasks.findIndex(t => t.id === id);
                if (index !== -1) {
                    const task = this.tasks[index];
                    this.tasks.splice(index, 1);
                    this.saveTasks();
                    
                    this.addActivity('delete', 'Deleted task: ' + task.title);
                    
                    this.loadTasks();
                    this.loadDashboard();
                }
                
                this.hideDeleteModal();
            }
            
            saveTasks() {
                localStorage.setItem('crm-tasks', JSON.stringify(this.tasks));
            }
            
            // Calendar
            setupCalendar() {
                this.currentMonth = new Date();
                this.renderCalendar();
                
                // Populate related to dropdown in event form
                const relatedToSelect = document.getElementById('event-related-to');
                relatedToSelect.innerHTML = '<option value="">None</option>';
                
                this.customers.forEach(customer => {
                    const option = document.createElement('option');
                    option.value = `customer_${customer.id}`;
                    option.textContent = `Customer: ${customer.name}`;
                    relatedToSelect.appendChild(option);
                });
                
                this.deals.forEach(deal => {
                    const option = document.createElement('option');
                    option.value = `deal_${deal.id}`;
                    option.textContent = `Deal: ${deal.name}`;
                    relatedToSelect.appendChild(option);
                });
            }
            
            renderCalendar() {
                const year = this.currentMonth.getFullYear();
                const month = this.currentMonth.getMonth();
                
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                
                const daysInMonth = lastDay.getDate();
                const startingDayOfWeek = firstDay.getDay(); // 0 = Sunday
                
                // Update month/year display
                document.getElementById('current-month-year').textContent = `${this.currentMonth.toLocaleString('default', { month: 'long' })} ${year}`;
                
                const calendarDaysContainer = document.getElementById('calendar-days');
                calendarDaysContainer.innerHTML = '';
                
                // Add empty cells for days before the start of the month
                for (let i = 0; i < startingDayOfWeek; i++) {
                    const dayCell = document.createElement('div');
                    dayCell.className = 'p-2 bg-gray-100 text-gray-400 h-24';
                    calendarDaysContainer.appendChild(dayCell);
                }
                
                // Add days of the month
                for (let day = 1; day <= daysInMonth; day++) {
                    const date = new Date(year, month, day);
                    const dayCell = document.createElement('div');
                    dayCell.className = 'p-2 border bg-white h-24 relative';
                    
                    // Check if this is today
                    const today = new Date();
                    if (date.getDate() === today.getDate() && 
                        date.getMonth() === today.getMonth() && 
                        date.getFullYear() === today.getFullYear()) {
                        dayCell.classList.add('bg-blue-50', 'border-blue-300');
                    }
                    
                    // Day number
                    const dayNumber = document.createElement('div');
                    dayNumber.className = 'text-right font-medium';
                    dayNumber.textContent = day;
                    dayCell.appendChild(dayNumber);
                    
                    // Find events for this day
                    const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    const dayEvents = this.events.filter(event => event.date === dateStr);
                    
                    // Add events to day cell
                    const eventContainer = document.createElement('div');
                    eventContainer.className = 'mt-1';
                    
                    dayEvents.slice(0, 2).forEach(event => {
                        const eventDiv = document.createElement('div');
                        eventDiv.className = `text-xs p-1 mb-1 rounded truncate ${this.getEventTypeColor(event.type)}`;
                        eventDiv.textContent = event.title;
                        eventDiv.title = event.title;
                        eventContainer.appendChild(eventDiv);
                    });
                    
                    if (dayEvents.length > 2) {
                        const moreDiv = document.createElement('div');
                        moreDiv.className = 'text-xs text-center text-gray-500';
                        moreDiv.textContent = `+${dayEvents.length - 2} more`;
                        eventContainer.appendChild(moreDiv);
                    }
                    
                    dayCell.appendChild(eventContainer);
                    
                    // Make day clickable to add event
                    dayCell.addEventListener('click', () => {
                        this.showEventModal(null, dateStr);
                    });
                    
                    calendarDaysContainer.appendChild(dayCell);
                }
                
                // Add empty cells for days after the end of the month
                const lastDayOfWeek = lastDay.getDay(); // 0 = Sunday
                if (lastDayOfWeek < 6) {
                    for (let i = lastDayOfWeek + 1; i <= 6; i++) {
                        const dayCell = document.createElement('div');
                        dayCell.className = 'p-2 bg-gray-100 text-gray-400 h-24';
                        calendarDaysContainer.appendChild(dayCell);
                    }
                }
                
                this.loadEvents();
            }
            
            navigateMonth(direction) {
                this.currentMonth.setMonth(this.currentMonth.getMonth() + direction);
                this.renderCalendar();
            }
            
            loadEvents() {
                // Display upcoming events
                const upcomingEventsContainer = document.getElementById('upcoming-events');
                upcomingEventsContainer.innerHTML = '';
                
                // Get events starting from today, sorted by date
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                
                const upcomingEvents = this.events
                    .filter(event => {
                        const eventDate = new Date(event.date);
                        return eventDate >= today;
                    })
                    .sort((a, b) => new Date(a.date) - new Date(b.date))
                    .slice(0, 5);
                
                if (upcomingEvents.length === 0) {
                    upcomingEventsContainer.innerHTML = '<p class="text-gray-500 italic">No upcoming events</p>';
                } else {
                    upcomingEvents.forEach(event => {
                        let relatedTo = '';
                        if (event.relatedTo) {
                            const [type, id] = event.relatedTo.split('_');
                            if (type === 'customer') {
                                const customer = this.customers.find(c => c.id === id);
                                if (customer) {
                                    relatedTo = `Customer: ${customer.name}`;
                                }
                            } else if (type === 'deal') {
                                const deal = this.deals.find(d => d.id === id);
                                if (deal) {
                                    relatedTo = `Deal: ${deal.name}`;
                                }
                            }
                        }
                        
                        const eventEl = document.createElement('div');
                        eventEl.className = 'bg-white border rounded p-3';
                        eventEl.innerHTML = `
                            <div class="flex justify-between">
                                <div>
                                    <h4 class="font-semibold">${event.title}</h4>
                                    <p class="text-sm text-gray-600">${relatedTo}</p>
                                </div>
                                <div>
                                    <span class="px-2 py-1 rounded text-xs ${this.getEventTypeColor(event.type)}">
                                        ${event.type}
                                    </span>
                                </div>
                            </div>
                            <div class="flex justify-between mt-2">
                                <div class="text-sm text-gray-500">
                                    <i class="far fa-calendar-alt mr-1"></i> ${this.formatDate(event.date)}
                                    ${event.time ? `<i class="far fa-clock ml-2 mr-1"></i> ${event.time}` : ''}
                                </div>
                                <div>
                                    <button class="text-blue-600 hover:text-blue-800 mr-2 edit-event" data-id="${event.id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="text-red-600 hover:text-red-800 delete-event" data-id="${event.id}">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </div>
                            </div>
                        `;
                        
                        upcomingEventsContainer.appendChild(eventEl);
                    });
                    
                    // Add event listeners to action buttons
                    document.querySelectorAll('.edit-event').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            this.editEvent(btn.dataset.id);
                        });
                    });
                    
                    document.querySelectorAll('.delete-event').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            e.stopPropagation();
                            this.confirmDeleteEvent(btn.dataset.id);
                        });
                    });
                }
            }
            
            showEventModal(event = null, dateStr = null) {
                const modal = document.getElementById('event-modal');
                const modalTitle = document.getElementById('event-modal-title');
                const form = document.getElementById('event-form');
                
                // Reset form
                form.reset();
                
                // Populate related to dropdown
                const relatedToSelect = document.getElementById('event-related-to');
                relatedToSelect.innerHTML = '<option value="">None</option>';
                
                this.customers.forEach(customer => {
                    const option = document.createElement('option');
                    option.value = `customer_${customer.id}`;
                    option.textContent = `Customer: ${customer.name}`;
                    relatedToSelect.appendChild(option);
                });
                
                this.deals.forEach(deal => {
                    const option = document.createElement('option');
                    option.value = `deal_${deal.id}`;
                    option.textContent = `Deal: ${deal.name}`;
                    relatedToSelect.appendChild(option);
                });
                
                if (event) {
                    modalTitle.textContent = 'Edit Event';
                    document.getElementById('event-id').value = event.id;
                    document.getElementById('event-title').value = event.title;
                    document.getElementById('event-date').value = event.date;
                    document.getElementById('event-time').value = event.time || '';
                    document.getElementById('event-type').value = event.type;
                    document.getElementById('event-related-to').value = event.relatedTo || '';
                    document.getElementById('event-description').value = event.description || '';
                } else {
                    modalTitle.textContent = 'Add New Event';
                    document.getElementById('event-id').value = '';
                    
                    // Set date if provided (from calendar click)
                    if (dateStr) {
                        document.getElementById('event-date').value = dateStr;
                    } else {
                        // Set default date to today
                        const today = new Date();
                        const yyyy = today.getFullYear();
                        const mm = String(today.getMonth() + 1).padStart(2, '0');
                        const dd = String(today.getDate()).padStart(2, '0');
                        document.getElementById('event-date').value = `${yyyy}-${mm}-${dd}`;
                    }
                }
                
                modal.classList.remove('hidden');
            }
            
            hideEventModal() {
                document.getElementById('event-modal').classList.add('hidden');
            }
            
            handleEventFormSubmit(e) {
                e.preventDefault();
                
                const id = document.getElementById('event-id').value;
                
                const newEvent = {
                    title: document.getElementById('event-title').value,
                    date: document.getElementById('event-date').value,
                    time: document.getElementById('event-time').value,
                    type: document.getElementById('event-type').value,
                    relatedTo: document.getElementById('event-related-to').value,
                    description: document.getElementById('event-description').value
                };
                
                if (id) {
                    // Update existing event
                    newEvent.id = id;
                    const index = this.events.findIndex(e => e.id === id);
                    if (index !== -1) {
                        this.events[index] = newEvent;
                        this.addActivity('update', 'Updated event: ' + newEvent.title);
                    }
                } else {
                    // Add new event
                    newEvent.id = this.generateId();
                    this.events.push(newEvent);
                    this.addActivity('create', 'Added new event: ' + newEvent.title);
                }
                
                this.saveEvents();
                this.hideEventModal();
                this.renderCalendar();
            }
            
            editEvent(id) {
                const event = this.events.find(e => e.id === id);
                if (event) {
                    this.showEventModal(event);
                }
            }
            
            confirmDeleteEvent(id) {
                const event = this.events.find(e => e.id === id);
                if (!event) return;
                
                this.showDeleteModal(
                    `Are you sure you want to delete event "${event.title}"?`,
                    () => this.deleteEvent(id)
                );
            }
            
            deleteEvent(id) {
                const index = this.events.findIndex(e => e.id === id);
                if (index !== -1) {
                    const event = this.events[index];
                    this.events.splice(index, 1);
                    this.saveEvents();
                    
                    this.addActivity('delete', 'Deleted event: ' + event.title);
                    
                    this.renderCalendar();
                }
                
                this.hideDeleteModal();
            }
            
            saveEvents() {
                localStorage.setItem('crm-events', JSON.stringify(this.events));
            }
            
            // Activities
            addActivity(type, description) {
                const activity = {
                    id: this.generateId(),
                    type: type,
                    description: description,
                    date: new Date().toISOString()
                };
                
                this.activities.unshift(activity);
                
                // Keep only last 100 activities
                if (this.activities.length > 100) {
                    this.activities = this.activities.slice(0, 100);
                }
                
                this.saveActivities();
            }
            
            saveActivities() {
                localStorage.setItem('crm-activities', JSON.stringify(this.activities));
            }
            
            // Delete modal
            showDeleteModal(message, confirmCallback) {
                document.getElementById('delete-message').textContent = message;
                document.getElementById('confirm-delete').onclick = confirmCallback;
                document.getElementById('delete-modal').classList.remove('hidden');
            }
            
            hideDeleteModal() {
                document.getElementById('delete-modal').classList.add('hidden');
            }
            
            // Data management
            exportData() {
                const data = {
                    customers: this.customers,
                    deals: this.deals,
                    tasks: this.tasks,
                    events: this.events,
                    activities: this.activities,
                    version: '1.0'
                };
                
                const dataStr = JSON.stringify(data);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileName = 'crm_data_' + new Date().toISOString().split('T')[0] + '.json';
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileName);
                linkElement.click();
            }
            
            importData(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const data = JSON.parse(e.target.result);
                        
                        if (data.customers) this.customers = data.customers;
                        if (data.deals) this.deals = data.deals;
                        if (data.tasks) this.tasks = data.tasks;
                        if (data.events) this.events = data.events;
                        if (data.activities) this.activities = data.activities;
                        
                        this.saveCustomers();
                        this.saveDeals();
                        this.saveTasks();
                        this.saveEvents();
                        this.saveActivities();
                        
                        this.addActivity('import', 'Imported CRM data');
                        
                        alert('Data imported successfully');
                        
                        // Refresh all views
                        this.loadDashboard();
                        this.loadCustomers();
                        this.loadDeals();
                        this.loadTasks();
                        this.renderCalendar();
                    } catch (error) {
                        alert('Error importing data: ' + error.message);
                    }
                };
                reader.readAsText(file);
            }
            
            confirmClearData() {
                this.showDeleteModal(
                    'Are you sure you want to clear all CRM data? This cannot be undone.',
                    () => this.clearAllData()
                );
            }
            
            clearAllData() {
                localStorage.removeItem('crm-customers');
                localStorage.removeItem('crm-deals');
                localStorage.removeItem('crm-tasks');
                localStorage.removeItem('crm-events');
                localStorage.removeItem('crm-activities');
                
                this.customers = [];
                this.deals = [];
                this.tasks = [];
                this.events = [];
                this.activities = [];
                
                alert('All data has been cleared');
                
                // Refresh all views
                this.loadDashboard();
                this.loadCustomers();
                this.loadDeals();
                this.loadTasks();
                this.renderCalendar();
                
                this.hideDeleteModal();
            }
            
            // Helper functions
            generateId() {
                return Date.now() + Math.floor(Math.random() * 1000);
            }
            
            formatDate(dateString) {
                if (!dateString) return '-';
                
                const date = new Date(dateString);
                return date.toLocaleDateString();
            }
            
            getStatusColor(status) {
                switch (status) {
                    case 'Active': return 'bg-green-100 text-green-800';
                    case 'Inactive': return 'bg-gray-100 text-gray-800';
                    case 'Lead': return 'bg-blue-100 text-blue-800';
                    default: return 'bg-gray-100 text-gray-800';
                }
            }
            
            getPriorityColor(priority) {
                switch (priority) {
                    case 'High': return 'bg-red-100 text-red-800';
                    case 'Medium': return 'bg-yellow-100 text-yellow-800';
                    case 'Low': return 'bg-green-100 text-green-800';
                    default: return 'bg-gray-100 text-gray-800';
                }
            }
            
            getTaskStatusColor(status) {
                switch (status) {
                    case 'Completed': return 'bg-green-100 text-green-800';
                    case 'In Progress': return 'bg-blue-100 text-blue-800';
                    case 'Pending': return 'bg-yellow-100 text-yellow-800';
                    default: return 'bg-gray-100 text-gray-800';
                }
            }
            
            getTaskPriorityColor(priority) {
                switch (priority) {
                    case 'High': return 'border-red-500';
                    case 'Medium': return 'border-yellow-500';
                    case 'Low': return 'border-green-500';
                    default: return 'border-gray-300';
                }
            }
            
            getEventTypeColor(type) {
                switch (type) {
                    case 'Meeting': return 'bg-indigo-100 text-indigo-800';
                    case 'Call': return 'bg-green-100 text-green-800';
                    case 'Deadline': return 'bg-red-100 text-red-800';
                    default: return 'bg-gray-100 text-gray-800';
                }
            }
            
            getActivityIcon(type) {
                switch (type) {
                    case 'create': return 'fa-plus-circle';
                    case 'update': return 'fa-edit';
                    case 'delete': return 'fa-trash-alt';
                    case 'import': return 'fa-file-import';
                    default: return 'fa-info-circle';
                }
            }
        }
        
        // Initialize the CRM when page loads
        document.addEventListener('DOMContentLoaded', () => {
            window.crm = new SimpleCRM();
        });
    </script>
</body>
</html>
